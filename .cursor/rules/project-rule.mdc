---
alwaysApply: true
---
# Project Rules - StudyFlow (Next.js + Firebase)

## ğŸ—ï¸ Tech Stack (Fixed)
- **Frontend**: Next.js 14 + React 18 + TypeScript
- **Styling**: TailwindCSS + Custom Design Tokens
- **Database**: Firebase Firestore
- **Authentication**: Firebase Auth (Email/Password + Google OAuth)
- **Deployment**: Firebase Hosting
- **State Management**: React Context + Custom Hooks

## ğŸ“ Project Structure# Project Rules - StudyFlow (Next.js + Firebase)

## ğŸ—ï¸ Tech Stack (Fixed)
- **Frontend**: Next.js 14 + React 18 + TypeScript
- **Styling**: TailwindCSS + Custom Design Tokens
- **Database**: Firebase Firestore
- **Authentication**: Firebase Auth (Email/Password + Google OAuth)
- **Deployment**: Firebase Hosting
- **State Management**: React Context + Custom Hooks

## ğŸ“ Project Structure
src/
â”œâ”€â”€ components/
â”‚ â”œâ”€â”€ ui/ # Reusable UI components
â”‚ â”œâ”€â”€ features/ # Feature-specific components
â”‚ â”‚ â”œâ”€â”€ auth/ # Login/Register forms
â”‚ â”‚ â”œâ”€â”€ chat/ # Chat functionality
â”‚ â”‚ â”œâ”€â”€ flashcards/ # Flashcard system
â”‚ â”‚ â”œâ”€â”€ habits/ # Habit tracking
â”‚ â”‚ â”œâ”€â”€ pomodoro/ # Pomodoro timer
â”‚ â”‚ â””â”€â”€ profile/ # User profile
â”‚ â””â”€â”€ common/ # Shared components
â”œâ”€â”€ contexts/ # React Context providers
â”œâ”€â”€ hooks/ # Custom React hooks
â”œâ”€â”€ services/ # External services (Firebase, AI)
â”œâ”€â”€ types/ # TypeScript type definitions
â”œâ”€â”€ utils/ # Helper functions
â””â”€â”€ pages/ # Next.js pages


## ğŸ”§ Coding Rules

### Frontend (Next.js + React)
- **Components**: Functional components + hooks only
- **Styling**: TailwindCSS + custom utility classes
- **Design Tokens**: Use predefined classes (.auth-card, .auth-input, .btn-primary, .btn-ghost)
- **State Management**: React Context cho global state, useState cho local state
- **Form Handling**: Controlled components vá»›i real-time validation

### TypeScript Standards
- **Strict Mode**: Enabled
- **No `any` types**: Use proper interfaces
- **Interface Naming**: PascalCase (UserProfile, AuthContext)
- **Type Exports**: From centralized types/ directory

## ğŸ” Authentication Rules
- **Firebase Auth**: Email/Password + Google OAuth
- **Context Provider**: AuthContext cho global auth state
- **Protected Routes**: Redirect to login if not authenticated
- **User Profile**: Store in Firestore vá»›i proper validation
- **Error Handling**: User-friendly error messages

## ğŸ¨ UI/UX Guidelines
- **Design System**: Dark theme vá»›i glassmorphism effects
- **Primary Button**: `btn-primary` (gradient from-indigo-500 to-violet-500)
- **Ghost Button**: `btn-ghost` (white background)
- **Cards**: `auth-card` (dark glassmorphism)
- **Inputs**: `auth-input` (dark with focus states)
- **Loading States**: LoadingButton component vá»›i aria-busy
- **Form Validation**: Real-time vá»›i error display
- **Responsive**: Mobile-first approach

## ğŸ›¡ï¸ Security Requirements
- **Firebase Rules**: Proper Firestore security rules
- **Environment Variables**: Sensitive data trong .env.local
- **Input Validation**: Client-side + Firestore rules
- **Error Boundaries**: Catch vÃ  handle errors gracefully
- **HTTPS**: Required in production

## ğŸ—„ï¸ Database Rules (Firestore)
- **Collections**: 
  - `profiles` - User profiles
  - `flashcard_decks` - Flashcard collections
  - `habits` - User habits
  - `progress` - Daily progress tracking
- **Document Structure**: Consistent naming vÃ  validation
- **Indexes**: Proper composite indexes cho queries
- **Security Rules**: Role-based access control

## ğŸ§ª Testing Requirements
- **Unit Tests**: Vitest cho utility functions
- **Component Tests**: React Testing Library
- **Test Files**: *.test.tsx trong __tests__ directory
- **Coverage**: Focus on critical business logic

## ğŸ“± Features Implementation
- **Auth Screens**: LoginForm, RegisterForm vá»›i design tokens
- **Chat**: AI-powered chat vá»›i Gemini integration
- **Flashcards**: Swipeable cards vá»›i progress tracking
- **Habits**: CRUD operations vá»›i streak tracking
- **Pomodoro**: Timer vá»›i habit integration
- **Profile**: User stats vÃ  settings

## âŒ Banned Practices
- **No inline styles**: Use Tailwind classes only
- **No class components**: Functional components only
- **No console.log**: Use proper error handling
- **No hardcoded values**: Use environment variables
- **No any types**: Use proper TypeScript interfaces
- **No CSS files**: TailwindCSS only

## ï¿½ï¿½ Code Quality
- **ESLint**: Configured vá»›i Next.js rules
- **Prettier**: Consistent code formatting
- **Import Order**: Absolute imports tá»« src/
- **Component Props**: TypeScript interfaces
- **Error Handling**: Try-catch vá»›i proper error messages

## ğŸ“š Documentation
- **README**: Setup instructions vÃ  features overview
- **CHANGELOG**: Track changes vÃ  new features
- **Component Props**: JSDoc comments
- **API Integration**: Document Firebase service calls